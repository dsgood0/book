<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.LoanMapper">
	
	<select id="selectByLno" resultType="LoanVO">
		select * from loan where lno = #{lno}
	</select>
	
	<select id="selectByBno" resultType="LoanVO">
		select *, DATE_ADD(startdate, INTERVAL 14 DAY) from loan where bno = #{bno}
	</select>
	
	<insert id="insert" parameterType="BookDetailVO">
		insert into loan(startdate, userid, bno) values(now(), #{userid}, #{bno})
	</insert>
	
	<update id="updateExtend" parameterType="LoanVO">
		update loan
		set extend = 1, ex_sdate = now(), ex_edate = DATE_ADD(now(), interval 14 DAY)
		where lno = #{lno}	
	</update>
	
	<update id="updateEndDate">
		update loan
		set enddate = now()
		where lno = #{lno}
	</update>
	
</mapper>